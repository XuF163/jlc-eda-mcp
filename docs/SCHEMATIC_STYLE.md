# 原理图绘图偏好（MCP）

本文件记录当前项目的“原理图绘制风格/偏好”，用于约束 MCP 自动化绘图与后续增量修改的输出，使原理图**更可读、可审查、便于采购**。

## 1) 元件与属性（采购优先）

- 放置/更新器件时，尽量同步填写元件的 **Value/值**（如：`5.1k`、`10uF`、`3.3V LDO` 型号/料号等），减少 DRC “值为空”的信息提示。
- 优先使用嘉立创 EDA 自带库（可标准化/可采购），避免引入来源不明的符号导致后期替换成本。
- 需要保留可追溯信息时，尽量保持库关联字段一致（避免 “属性与供应商编号不匹配”）；若确实需要改值/改型号，应同步相关属性（后续通过 MCP 增加 `set_properties` 工具支持）。

## 2) 布局与可读性

- **模块化分区**：按功能块分组（如：USB 供电、LDO、电源输出、MCU/芯片本体等），模块之间留白，便于人类审查。
- **元件分散**：避免所有元件挤在一起；同一模块内器件靠近但不堆叠。
- **走线避让**：导线尽量不压到元件符号/文字上；跨区域长导线尽量避免。

## 3) 网络连接策略（优先网络标签）

- **跨模块优先使用“网络标签（Net Label）”连接**，而不是用长导线跨越整个页面。
- 供电入口/出口应在模块边界处引出清晰的网络标签：
  - USB 供电侧引出 `VBUS`、`GND`（必要时还包括 `CC1`、`CC2` 等信号）。
  - 下游芯片/模块同样在对应引脚处引出同名网络标签（如 `VBUS`、`3V3`、`GND`），形成“标签对标签”的连接，图面更简洁。
- 注意区分：**网络标签（Net Label）≠ 网络端口（Net Port）**。当前项目偏好使用网络标签。
  - 在实现上，网络标签等效于导线的 `NET` 属性（类似 EDA 中 Alt+N 的效果）。
  - MCP 侧应优先使用 `jlc.schematic.netlabel.attach_pin` 来生成网络标签，避免误用 netPort 元件。
- **避免重复标签**：同一个连接点不应出现多个相同的网络标签（例如重复的 `VCC`/`GND`）。

## 4) 走线规范（尽量规整）

- 走线风格优先 Manhattan（直角折线），必要时再用直线。
- 线段端点应落在引脚端点附近，避免穿过符号边框或遮挡注释文字。
- 对重复/未使用的引脚：
  - 若应并网（如 Type‑C 的重复 `VBUS/GND` 脚），则连接到对应网络；
  - 若明确不使用，则放置“非连接标识（NC）”以消除悬空告警。

## 5) 验收期望（自动化应尽量达到）

- DRC：无致命错误/错误；警告尽量可解释且最小化（例如明确的 NC 允许存在）。
- 网表/连通性：`verify_netlist`（或兜底 `verify_nets`）应能验证关键网络归属正确。

